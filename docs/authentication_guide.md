# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ API

## ‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üîë SHARED_KEY
–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## üì° –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints –¥–ª—è polling

### 1. –ü—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```
GET /api/v1/jobs/{job_id}/status
```
**–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥–ø–∏—Å–∏** - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ polling!

### 2. –ü–æ–ª–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å –¥–µ—Ç–∞–ª—è–º–∏ (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å—å)
```
GET /api/v1/batch-status/{job_id}
```

### 3. –ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å—å)
```
GET /api/v1/jobs/{job_id}
```

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø–æ–¥–ø–∏—Å–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–∞:
```bash
python3 tools/signature_helper.py "/api/v1/batch-status/365a09ce-5416-49b5-8471-d6aad042761c"
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
üîê –ü–æ–¥–ø–∏—Å—å: 31372e0cc162d8177cd01417440ae6ed9e8c74894765825b64d335070b80c426
```

## üåê –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –° –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (—á–µ—Ä–µ–∑ curl):
```bash
curl -X GET "http://localhost:5000/api/v1/batch-status/365a09ce-5416-49b5-8471-d6aad042761c" \
  -H "X-Signature: 31372e0cc162d8177cd01417440ae6ed9e8c74894765825b64d335070b80c426"
```

### –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–ª—è polling):
```bash
curl "http://localhost:5000/api/v1/jobs/365a09ce-5416-49b5-8471-d6aad042761c/status"
```

## üìã –û—Ç–≤–µ—Ç –¥–ª—è –∑–∞–¥–∞—á–∏ 365a09ce-5416-49b5-8471-d6aad042761c

```json
{
  "created_at": "2025-08-05T20:28:57.827452",
  "error": "Translation batch timeout - completed with English results only",
  "job_id": "365a09ce-5416-49b5-8471-d6aad042761c",
  "status": "completed",
  "updated_at": "2025-08-06T04:14:25.138740"
}
```

## üéØ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã polling

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** –í–∞—à –∫–ª–∏–µ–Ω—Ç –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å "translating" - –∑–∞–¥–∞—á–∞ –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ "completed".

### –î–ª—è polling –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```
GET /api/v1/jobs/{job_id}/status  # –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∏
```

### –î–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π:
```
GET /api/v1/batch-status/{job_id}  # –¢—Ä–µ–±—É–µ—Ç HMAC-–ø–æ–¥–ø–∏—Å—å
```

## üîß Python –ø—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏

```python
import hmac
import hashlib
import os

def generate_signature(payload: str) -> str:
    shared_key = os.environ.get("SHARED_KEY")
    return hmac.new(
        shared_key.encode(),
        payload.encode(),
        hashlib.sha256
    ).hexdigest()

# –î–ª—è GET –∑–∞–ø—Ä–æ—Å–∞ payload –ø—É—Å—Ç–æ–π
signature = generate_signature("")
print(f"X-Signature: {signature}")
```